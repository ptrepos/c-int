#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include <magica/uint256.h>

#include "mg_assert.h"

static void convert_test(const char *text1)
{
	char strbuf[1024];
	mg_uint256 v1;

	mg_uint256_test_convert(text1, &v1);

	mg_uint256_test_to_string(&v1, strbuf);

	mg_assert(strcmp(text1, strbuf) == 0);
}

static void hex_convert_test(const char *text1)
{
	char strbuf[1024];
	mg_uint256 v1;

	mg_uint256_test_hex_convert(text1, &v1);

	mg_uint256_test_to_hex_string(&v1, strbuf);

	mg_assert(strcmp(text1, strbuf) == 0);
}


void mg_uint256_convert_test()
{
	convert_test("1");
	convert_test("9");
	convert_test("12345687");
	convert_test("123456789012345678901234567890");
	convert_test("9874564121234561");
	convert_test("340282");
	convert_test("3402823669209");
	convert_test("34028236692093846346337");
	convert_test("34028236692093846346337460743176");
	convert_test("340282366920938463463374607431768211455");
	convert_test("340282366920938463463374607431768211454");
	convert_test("340282366920938463463374607431768211455340282");
	convert_test("34028236692093846346337460743176821145534028236692");
	convert_test("340282366920938463463374607431768211455340282366920938463");
	convert_test("340282366920938463463374607431768211455340282366920938463463374");
	convert_test("34028236692093846346337460743176821145534028236692093846346337460743176");
	convert_test("34028236692093846346337460743176821145534028236692093846346337460743176821145");
	convert_test("115792089");
	convert_test("1157920892373161");
	convert_test("11579208923731619542357");
	convert_test("1157920892373161954235709850086");
	convert_test("1157920892373161954235709850086879078532");
	convert_test("115792089237316195423570985008687907853269984665");
	convert_test("11579208923731619542357098500868790785326998466564056403");
	convert_test("11579208923731619542357098500868790785326998466564056403945758");
	convert_test("115792089237316195423570985008687907853269984665640564039457584007913");
	convert_test("115792089237316195423570985008687907853269984665640564039457584007913129639935");
	convert_test("115792089237316195423570985008687907853269984665640564039457584007913");
	
	hex_convert_test("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");
	hex_convert_test("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");
	hex_convert_test("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");
	hex_convert_test("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");
	hex_convert_test("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");
	hex_convert_test("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");
	hex_convert_test("FFFFFFFFFFFFFFFFFFFFFFFFFFFF");
	hex_convert_test("FFFFFFFFFFFFFFFFFFFFFF");
	hex_convert_test("FFFFFFFFFFFFFFF");
	hex_convert_test("FFFFFFF");
	hex_convert_test("FF");
	hex_convert_test("123456789ABCDEF123456789ABCDEF123456789ABCDEF123456789ABCDEF");
	hex_convert_test("123456789ABCDEF123456789ABCDEF123456789ABCDEF123456789");
	hex_convert_test("123456789ABCDEF123456789ABCDEF123456789ABCDEF1");
	hex_convert_test("123456789ABCDEF123456789ABCDEF12345678");
	hex_convert_test("123456789ABCDEF123456789ABCDEF");
	hex_convert_test("123456789ABCDEF123456789A");
	hex_convert_test("123456789ABCDEF123456");
	hex_convert_test("123456789ABCDE");
	hex_convert_test("123456789");
	hex_convert_test("1234");
	
	printf("TEST mg_uint256 conversion: OK\n");
}
